# .readthedocs.yml
version: 2

sphinx:
    # Path to your Sphinx configuration file.
    configuration: docs/user_guide/source/conf.py

conda:
  environment: docs/environment.yml

build:
    os: "ubuntu-22.04"
    tools:
        python: "mambaforge-latest"
    jobs:
        pre_install:
            - CXXFLAGS="-O0" cmake -GNinja -B build -S . -DCMAKE_BUILD_TYPE=Release -DADIOS2_USE_Python=ON
            - cmake --build build -j$(nproc)
            # Sphinx can locate the python module at $HOME/.local
            - cmake --install build --prefix "$HOME/.local"
formats:
  - pdf
  - epub
